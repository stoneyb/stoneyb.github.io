(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();class f{constructor(t=50){this.history=[],this.index=-1,this.maxSize=t,this.tempInput=""}add(t){const s=t.trim();if(s){if(s===this.history[this.history.length-1]){this.reset();return}this.history.push(s),this.history.length>this.maxSize&&this.history.shift(),this.reset()}}navigateUp(t){return this.index===-1&&(this.tempInput=t),this.history.length===0?t:(this.index<this.history.length-1&&this.index++,this.history[this.history.length-1-this.index]||t)}navigateDown(){return this.index>0?(this.index--,this.history[this.history.length-1-this.index]):this.index===0?(this.index=-1,this.tempInput):this.tempInput}reset(){this.index=-1,this.tempInput=""}getAll(){return[...this.history]}}function g(o){o.register("help",(t,s)=>{const e=o.getVisibleCommands();s.print(`
<span class="output-accent">Available Commands</span>`,"response"),s.print('<span class="output-muted">─────────────────────────────────</span>',"response"),s.print('<div class="help-table">',"response"),e.forEach(({name:i,description:n,aliases:a})=>{const l=a.length?` <span class="output-muted">(${a.join(", ")}) </span>`:" ";s.print(`<span class="help-cmd">${i}</span>${l}<span class="help-desc">${n}</span>`,"response")}),s.print("</div>","response"),s.print(`
<span class="output-muted">Tip: Try typing random commands... you might find easter eggs!</span>
`,"response")},{description:"Show available commands",aliases:["?","commands"]}),o.register("about",(t,s)=>{s.print(`
<span class="ascii-box">┌─────────────────────────────────────────────────────┐</span>
<span class="ascii-box">│</span>  <span class="output-accent">TOM STONEBERG</span>                                      <span class="ascii-box">│</span>
<span class="ascii-box">├─────────────────────────────────────────────────────┤</span>
<span class="ascii-box">│</span>                                                     <span class="ascii-box">│</span>
<span class="ascii-box">│</span>  I am a software engineer based in Colorado.      <span class="ascii-box">│</span>
<span class="ascii-box">│</span>                                                     <span class="ascii-box">│</span>
<span class="ascii-box">│</span>                                                     <span class="ascii-box">│</span>
<span class="ascii-box">│</span>  This site is a playground for kicking the tires  <span class="ascii-box">│</span>
<span class="ascii-box">│</span>  of various AI coding software. Claude Code was   <span class="ascii-box">│</span>
<span class="ascii-box">│</span>  used for the initial scaffolding.                 <span class="ascii-box">│</span>
<span class="ascii-box">│</span>                                                     <span class="ascii-box">│</span>
<span class="ascii-box">└─────────────────────────────────────────────────────┘</span>
`,"response")},{description:"Learn about me",aliases:["bio","me"]}),o.register("resume",(t,s)=>{s.print(`
<span class="output-accent">Resume / CV</span>
<span class="output-muted">───────────────────────────────────────────────</span>

<span class="output-cyan">Work Experience:</span>

  <span class="output-accent">Skipify</span>                      <span class="output-muted">Apr 2022 - Present</span>
  <span class="output-accent">Zuul</span>                         <span class="output-muted">Jun 2021 - Present</span>
  <span class="output-accent">Promontech</span>                   <span class="output-muted">Jul 2018 - Jun 2021</span>
  <span class="output-accent">Homeadvisor</span>                  <span class="output-muted">Feb 2016 - Jul 2018</span>
  <span class="output-accent">Lawyaw</span>                       <span class="output-muted">Aug 2016 - Apr 2017</span>
  <span class="output-accent">Independent</span>                  <span class="output-muted">Dec 2014 - Dec 2015</span>
  <span class="output-accent">Denver Energy Group</span>          <span class="output-muted">Jul 2014 - Dec 2014</span>
  <span class="output-accent">Northrop Grumman</span>             <span class="output-muted">May 2012 - May 2014</span>
  <span class="output-accent">Nasdaq OMX</span>                   <span class="output-muted">May 2010 - Apr 2012</span>

<span class="output-muted">───────────────────────────────────────────────</span>
<span class="output-success">↓</span> <a href="assets/TomStonebergResumeJan2026.pdf" target="_blank" rel="noopener">View Full Resume (PDF)</a>
`,"response")},{description:"View my resume",aliases:["cv"]}),o.register("contact",(t,s)=>{s.print(`
<span class="output-accent">Get In Touch</span>
<span class="output-muted">─────────────────────────────────</span>

  <span class="output-cyan">Email:</span>     <a href="mailto:hello@tomstoneberg.com">hello@tomstoneberg.com</a>

  <span class="output-cyan">GitHub:</span>    <a href="https://github.com/stoneyb" target="_blank" rel="noopener">github.com/stoneyb</a>

  <span class="output-cyan">LinkedIn:</span>  <a href="https://bishopfox.com/blog/linkedin-introduces-insecurity" target="_blank" rel="noopener">No</a>

  <span class="output-cyan">X:</span>         <a href="https://x.com/tstoneb" target="_blank" rel="noopener">@tstoneb</a>

  <span class="output-cyan">Goodreads:</span> <a href="https://www.goodreads.com/user/show/40625768" target="_blank" rel="noopener">40625768</a>

<span class="output-muted">─────────────────────────────────</span>
<span class="output-muted">Feel free to reach out!</span>
`,"response")},{description:"Contact information",aliases:["email","socials"]}),o.register("clear",(t,s)=>{s.clear()},{description:"Clear the terminal",aliases:["cls","c"]}),o.register("ls",(t,s)=>{s.print(`
<span class="output-cyan">drwxr-xr-x</span>  <span class="output-muted">tom</span>  <span class="output-accent">about/</span>
<span class="output-cyan">drwxr-xr-x</span>  <span class="output-muted">tom</span>  <span class="output-accent">resume/</span>
<span class="output-cyan">drwxr-xr-x</span>  <span class="output-muted">tom</span>  <span class="output-accent">contact/</span>
<span class="output-cyan">-rw-r--r--</span>  <span class="output-muted">tom</span>  <span class="output-muted">README.md</span>
<span class="output-cyan">-rw-r--r--</span>  <span class="output-muted">tom</span>  <span class="output-muted">.secrets</span>
`,"response")},{description:"List available sections",aliases:["dir","list"]})}class b{constructor(){this.canvas=null,this.ctx=null,this.animationId=null,this.columns=0,this.drops=[],this.fontSize=14,this.isRunning=!1,this.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン"}start(t=1e4){this.isRunning||(this.isRunning=!0,this.createCanvas(),this.initDrops(),this.animate(),this.timeout=setTimeout(()=>this.stop(),t),this.escHandler=s=>{s.key==="Escape"&&this.stop()},document.addEventListener("keydown",this.escHandler),this.resizeHandler=()=>this.resize(),window.addEventListener("resize",this.resizeHandler))}createCanvas(){this.canvas=document.createElement("canvas"),this.canvas.id="matrix-canvas",document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.resize()}resize(){this.canvas&&(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.columns=Math.floor(this.canvas.width/this.fontSize),this.initDrops())}initDrops(){this.drops=Array(this.columns).fill(0).map(()=>Math.random()*-100)}animate(){if(this.isRunning){this.ctx.fillStyle="rgba(5, 5, 10, 0.05)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font=`${this.fontSize}px "IBM Plex Mono", monospace`;for(let t=0;t<this.drops.length;t++){const s=this.chars[Math.floor(Math.random()*this.chars.length)],e=t*this.fontSize,i=this.drops[t]*this.fontSize,n=Math.random()*.5+.5;Math.random()>.98?(this.ctx.fillStyle="#ffc233",this.ctx.shadowColor="#ffc233",this.ctx.shadowBlur=10):(this.ctx.fillStyle=`rgba(212, 160, 23, ${n})`,this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0),this.ctx.fillText(s,e,i),i>this.canvas.height&&Math.random()>.975&&(this.drops[t]=0),this.drops[t]++}this.animationId=requestAnimationFrame(()=>this.animate())}}stop(){this.isRunning=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.canvas&&(this.canvas.style.transition="opacity 0.5s ease",this.canvas.style.opacity="0",setTimeout(()=>{this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null,this.ctx=null},500)),document.removeEventListener("keydown",this.escHandler),window.removeEventListener("resize",this.resizeHandler);const t=document.getElementById("terminal-input");t&&t.focus()}}class y{constructor(t){this.terminal=t,this.canvas=null,this.ctx=null,this.container=null,this.gridSize=20,this.tileCount=15,this.canvasSize=this.gridSize*this.tileCount,this.snake=[],this.food={x:0,y:0},this.direction={x:0,y:0},this.nextDirection={x:0,y:0},this.score=0,this.highScore=parseInt(localStorage.getItem("snakeHighScore")||"0"),this.gameLoop=null,this.isRunning=!1,this.isPaused=!1,this.speed=100,this.touchStartX=null,this.touchStartY=null,this.minSwipeDistance=30,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0}start(){if(this.isMobile){const t=document.getElementById("terminal-input");t&&t.blur()}this.createGameArea(),this.resetGame(),this.bindControls(),this.isRunning=!0,this.gameLoop=setInterval(()=>this.update(),this.speed)}createGameArea(){this.container=document.createElement("div"),this.container.className="game-container",this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasSize,this.canvas.height=this.canvasSize,this.canvas.className="snake-canvas";const t=document.createElement("div");t.className="game-info",t.id="snake-info",t.innerHTML=`Score: <span id="snake-score">0</span> | High Score: <span id="snake-high">${this.highScore}</span>`,this.container.appendChild(this.canvas),this.container.appendChild(t),this.isMobile&&this.createMobileControls(),this.terminal.outputEl.appendChild(this.container),this.ctx=this.canvas.getContext("2d"),this.container.scrollIntoView({behavior:"smooth",block:"center"})}createMobileControls(){const t=document.createElement("div");t.className="snake-mobile-controls";const s=document.createElement("div");s.className="snake-dpad";const e=document.createElement("button");e.className="snake-btn snake-btn-up",e.setAttribute("aria-label","Move up"),e.innerHTML="↑",e.onclick=()=>this.handleDirection({x:0,y:-1});const i=document.createElement("button");i.className="snake-btn snake-btn-left",i.setAttribute("aria-label","Move left"),i.innerHTML="←",i.onclick=()=>this.handleDirection({x:-1,y:0});const n=document.createElement("button");n.className="snake-btn snake-btn-center",n.setAttribute("aria-label","Pause"),n.innerHTML="⏸",n.onclick=()=>{this.isRunning&&(this.isPaused=!this.isPaused,this.draw())};const a=document.createElement("button");a.className="snake-btn snake-btn-right",a.setAttribute("aria-label","Move right"),a.innerHTML="→",a.onclick=()=>this.handleDirection({x:1,y:0});const l=document.createElement("button");l.className="snake-btn snake-btn-down",l.setAttribute("aria-label","Move down"),l.innerHTML="↓",l.onclick=()=>this.handleDirection({x:0,y:1}),s.appendChild(e),s.appendChild(i),s.appendChild(n),s.appendChild(a),s.appendChild(l),t.appendChild(s),this.container.appendChild(t)}resetGame(){const t=Math.floor(this.tileCount/2);this.snake=[{x:t,y:t},{x:t-1,y:t},{x:t-2,y:t}],this.direction={x:0,y:0},this.nextDirection={x:0,y:0},this.score=0,this.updateScore(),this.placeFood(),this.draw()}handleDirection(t){this.isRunning&&((this.direction.x!==0||this.direction.y!==0)&&t.x===-this.direction.x&&t.y===-this.direction.y||(this.nextDirection=t))}bindControls(){this.keyHandler=t=>{if(!this.isRunning)return;const s={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0},w:{x:0,y:-1},W:{x:0,y:-1},s:{x:0,y:1},S:{x:0,y:1},a:{x:-1,y:0},A:{x:-1,y:0},d:{x:1,y:0},D:{x:1,y:0}};if(t.key==="Escape"){this.stop(),this.terminal.print(`
<span class="output-muted">Game ended. Type "snake" to play again!</span>
`,"response");return}if(t.key===" "){this.isPaused=!this.isPaused,t.preventDefault();return}const e=s[t.key];e&&(this.handleDirection(e),t.preventDefault())},document.addEventListener("keydown",this.keyHandler),this.isMobile&&this.canvas&&(this.touchStartHandler=t=>{if(!this.isRunning)return;const s=t.touches[0];this.touchStartX=s.clientX,this.touchStartY=s.clientY},this.touchEndHandler=t=>{if(!this.isRunning||this.touchStartX===null||this.touchStartY===null)return;const s=t.changedTouches[0],e=s.clientX-this.touchStartX,i=s.clientY-this.touchStartY,n=Math.abs(e),a=Math.abs(i);if(n<this.minSwipeDistance&&a<this.minSwipeDistance){this.touchStartX=null,this.touchStartY=null;return}n>a?e>0?this.handleDirection({x:1,y:0}):this.handleDirection({x:-1,y:0}):i>0?this.handleDirection({x:0,y:1}):this.handleDirection({x:0,y:-1}),this.touchStartX=null,this.touchStartY=null,t.preventDefault()},this.canvas.addEventListener("touchstart",this.touchStartHandler,{passive:!0}),this.canvas.addEventListener("touchend",this.touchEndHandler,{passive:!1}))}update(){if(this.isPaused||!this.isRunning){this.draw();return}if((this.nextDirection.x!==0||this.nextDirection.y!==0)&&(this.direction={...this.nextDirection}),this.direction.x===0&&this.direction.y===0){this.draw();return}const t={x:this.snake[0].x+this.direction.x,y:this.snake[0].y+this.direction.y};if(t.x<0||t.x>=this.tileCount||t.y<0||t.y>=this.tileCount){this.gameOver();return}if(this.snake.some(s=>s.x===t.x&&s.y===t.y)){this.gameOver();return}this.snake.unshift(t),t.x===this.food.x&&t.y===this.food.y?(this.score+=10,this.updateScore(),this.placeFood(),this.speed>50&&(this.speed-=2,clearInterval(this.gameLoop),this.gameLoop=setInterval(()=>this.update(),this.speed))):this.snake.pop(),this.draw()}placeFood(){let t;do t={x:Math.floor(Math.random()*this.tileCount),y:Math.floor(Math.random()*this.tileCount)};while(this.snake.some(s=>s.x===t.x&&s.y===t.y));this.food=t}draw(){this.ctx.fillStyle="#0a0a0f",this.ctx.fillRect(0,0,this.canvasSize,this.canvasSize),this.ctx.strokeStyle="rgba(212, 160, 23, 0.05)",this.ctx.lineWidth=1;for(let t=0;t<=this.tileCount;t++){const s=t*this.gridSize;this.ctx.beginPath(),this.ctx.moveTo(s,0),this.ctx.lineTo(s,this.canvasSize),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(0,s),this.ctx.lineTo(this.canvasSize,s),this.ctx.stroke()}if(this.snake.forEach((t,s)=>{const e=t.x*this.gridSize,i=t.y*this.gridSize;if(s===0)this.ctx.fillStyle="#ffc233",this.ctx.shadowColor="#ffc233",this.ctx.shadowBlur=8;else{const n=1-s/this.snake.length*.5;this.ctx.fillStyle=`rgba(212, 160, 23, ${n})`,this.ctx.shadowBlur=0}this.roundRect(e+2,i+2,this.gridSize-4,this.gridSize-4,3)}),this.ctx.shadowBlur=0,this.ctx.fillStyle="#f87171",this.ctx.shadowColor="#f87171",this.ctx.shadowBlur=10,this.ctx.beginPath(),this.ctx.arc(this.food.x*this.gridSize+this.gridSize/2,this.food.y*this.gridSize+this.gridSize/2,this.gridSize/2-4,0,Math.PI*2),this.ctx.fill(),this.ctx.shadowBlur=0,this.isPaused){this.ctx.fillStyle="rgba(5, 5, 10, 0.7)",this.ctx.fillRect(0,0,this.canvasSize,this.canvasSize),this.ctx.fillStyle="#ffc233",this.ctx.font='bold 24px "IBM Plex Mono"',this.ctx.textAlign="center",this.ctx.fillText("PAUSED",this.canvasSize/2,this.canvasSize/2),this.ctx.font='14px "IBM Plex Mono"',this.ctx.fillStyle="#9ca3af";const t=this.isMobile?"Tap pause button to resume":"Press SPACE to resume";this.ctx.fillText(t,this.canvasSize/2,this.canvasSize/2+30)}if(this.direction.x===0&&this.direction.y===0&&!this.isPaused){this.ctx.fillStyle="rgba(5, 5, 10, 0.5)",this.ctx.fillRect(0,0,this.canvasSize,this.canvasSize),this.ctx.fillStyle="#ffc233",this.ctx.font='14px "IBM Plex Mono"',this.ctx.textAlign="center";const t=this.isMobile?"Swipe or use buttons to start":"Press arrow keys to start";this.ctx.fillText(t,this.canvasSize/2,this.canvasSize/2)}}roundRect(t,s,e,i,n){this.ctx.beginPath(),this.ctx.moveTo(t+n,s),this.ctx.lineTo(t+e-n,s),this.ctx.quadraticCurveTo(t+e,s,t+e,s+n),this.ctx.lineTo(t+e,s+i-n),this.ctx.quadraticCurveTo(t+e,s+i,t+e-n,s+i),this.ctx.lineTo(t+n,s+i),this.ctx.quadraticCurveTo(t,s+i,t,s+i-n),this.ctx.lineTo(t,s+n),this.ctx.quadraticCurveTo(t,s,t+n,s),this.ctx.closePath(),this.ctx.fill()}updateScore(){const t=document.getElementById("snake-score"),s=document.getElementById("snake-high");t&&(t.textContent=this.score),this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("snakeHighScore",this.highScore.toString()),s&&(s.textContent=this.highScore))}gameOver(){this.stop(),this.ctx.fillStyle="rgba(248, 113, 113, 0.3)",this.ctx.fillRect(0,0,this.canvasSize,this.canvasSize),setTimeout(()=>{this.ctx.fillStyle="rgba(5, 5, 10, 0.8)",this.ctx.fillRect(0,0,this.canvasSize,this.canvasSize),this.ctx.fillStyle="#f87171",this.ctx.font='bold 20px "IBM Plex Mono"',this.ctx.textAlign="center",this.ctx.fillText("GAME OVER",this.canvasSize/2,this.canvasSize/2-20),this.ctx.fillStyle="#ffc233",this.ctx.font='16px "IBM Plex Mono"',this.ctx.fillText(`Score: ${this.score}`,this.canvasSize/2,this.canvasSize/2+10),this.score>=this.highScore&&this.score>0&&(this.ctx.fillStyle="#34d399",this.ctx.font='12px "IBM Plex Mono"',this.ctx.fillText("NEW HIGH SCORE!",this.canvasSize/2,this.canvasSize/2+35))},200),this.terminal.print(`
<span class="output-error">Game Over!</span> Final Score: <span class="output-accent">${this.score}</span>`,"response"),this.score>=this.highScore&&this.score>0&&this.terminal.print('<span class="output-success">New High Score!</span>',"response"),this.terminal.print(`<span class="output-muted">Type "snake" to play again</span>
`,"response")}stop(){this.isRunning=!1,this.gameLoop&&(clearInterval(this.gameLoop),this.gameLoop=null),document.removeEventListener("keydown",this.keyHandler),this.canvas&&this.touchStartHandler&&this.touchEndHandler&&(this.canvas.removeEventListener("touchstart",this.touchStartHandler),this.canvas.removeEventListener("touchend",this.touchEndHandler)),setTimeout(()=>{const t=document.getElementById("terminal-input");t&&t.focus()},100)}}class v{constructor(t){this.terminal=t,this.canvas=null,this.ctx=null,this.container=null,this.canvasWidth=400,this.canvasHeight=300,this.paddleWidth=70,this.paddleHeight=10,this.paddleX=0,this.paddleSpeed=8,this.ballRadius=6,this.ballX=0,this.ballY=0,this.ballDX=4,this.ballDY=-4,this.brickRowCount=5,this.brickColumnCount=8,this.brickWidth=45,this.brickHeight=15,this.brickPadding=2,this.brickOffsetTop=30,this.brickOffsetLeft=13,this.bricks=[],this.score=0,this.lives=3,this.level=1,this.highScore=parseInt(localStorage.getItem("breakoutHighScore")||"0"),this.isRunning=!1,this.isPaused=!1,this.gameLoop=null,this.leftPressed=!1,this.rightPressed=!1,this.touchX=null,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0}start(){if(this.isMobile){const t=document.getElementById("terminal-input");t&&t.blur()}this.createGameArea(),this.initBricks(),this.resetBall(),this.paddleX=(this.canvasWidth-this.paddleWidth)/2,this.bindControls(),this.isRunning=!0,this.gameLoop=setInterval(()=>this.update(),16)}createGameArea(){this.container=document.createElement("div"),this.container.className="game-container",this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.className="breakout-canvas";const t=document.createElement("div");t.className="game-info",t.id="breakout-info",t.innerHTML=`
      Score: <span id="breakout-score">0</span> |
      Lives: <span id="breakout-lives">3</span> |
      Level: <span id="breakout-level">1</span> |
      Best: <span id="breakout-high">${this.highScore}</span>
    `,this.container.appendChild(this.canvas),this.container.appendChild(t),this.isMobile&&this.createMobileControls(),this.terminal.outputEl.appendChild(this.container),this.ctx=this.canvas.getContext("2d"),this.container.scrollIntoView({behavior:"smooth",block:"center"})}createMobileControls(){const t=document.createElement("div");t.className="breakout-mobile-controls";const s=document.createElement("button");s.className="breakout-btn breakout-btn-left",s.innerHTML="◀",s.setAttribute("aria-label","Move left");const e=document.createElement("button");e.className="breakout-btn breakout-btn-pause",e.innerHTML="⏸",e.setAttribute("aria-label","Pause");const i=document.createElement("button");i.className="breakout-btn breakout-btn-right",i.innerHTML="▶",i.setAttribute("aria-label","Move right"),s.addEventListener("touchstart",n=>{n.preventDefault(),this.leftPressed=!0}),s.addEventListener("touchend",()=>this.leftPressed=!1),s.addEventListener("mousedown",()=>this.leftPressed=!0),s.addEventListener("mouseup",()=>this.leftPressed=!1),s.addEventListener("mouseleave",()=>this.leftPressed=!1),i.addEventListener("touchstart",n=>{n.preventDefault(),this.rightPressed=!0}),i.addEventListener("touchend",()=>this.rightPressed=!1),i.addEventListener("mousedown",()=>this.rightPressed=!0),i.addEventListener("mouseup",()=>this.rightPressed=!1),i.addEventListener("mouseleave",()=>this.rightPressed=!1),e.addEventListener("click",()=>{this.isPaused=!this.isPaused}),t.appendChild(s),t.appendChild(e),t.appendChild(i),this.container.appendChild(t),this.injectMobileStyles()}injectMobileStyles(){if(document.getElementById("breakout-mobile-styles"))return;const t=document.createElement("style");t.id="breakout-mobile-styles",t.textContent=`
      .breakout-mobile-controls {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 10px;
      }

      .breakout-btn {
        width: 60px;
        height: 50px;
        font-size: 24px;
        background: rgba(212, 160, 23, 0.2);
        border: 2px solid var(--amber-dim);
        border-radius: 8px;
        color: var(--amber);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
      }

      .breakout-btn:active {
        background: rgba(212, 160, 23, 0.4);
      }
    `,document.head.appendChild(t)}initBricks(){this.bricks=[];for(let t=0;t<this.brickColumnCount;t++){this.bricks[t]=[];for(let s=0;s<this.brickRowCount;s++)this.bricks[t][s]={x:0,y:0,status:1}}}resetBall(){this.ballX=this.canvasWidth/2,this.ballY=this.canvasHeight-40;const t=(Math.random()-.5)*Math.PI/2,s=4+this.level*.5;this.ballDX=Math.sin(t)*s,this.ballDY=-Math.abs(Math.cos(t)*s)}bindControls(){this.keyDownHandler=t=>{if(this.isRunning){if(t.key==="Escape"){this.stop(),this.terminal.print(`
<span class="output-muted">Game ended. Type "breakout" to play again!</span>
`,"response");return}if(t.key===" "){t.preventDefault(),this.isPaused=!this.isPaused;return}(t.key==="ArrowLeft"||t.key==="a"||t.key==="A")&&(this.leftPressed=!0,t.preventDefault()),(t.key==="ArrowRight"||t.key==="d"||t.key==="D")&&(this.rightPressed=!0,t.preventDefault())}},this.keyUpHandler=t=>{(t.key==="ArrowLeft"||t.key==="a"||t.key==="A")&&(this.leftPressed=!1),(t.key==="ArrowRight"||t.key==="d"||t.key==="D")&&(this.rightPressed=!1)},this.mouseMoveHandler=t=>{const s=this.canvas.getBoundingClientRect(),e=t.clientX-s.left;e>0&&e<this.canvasWidth&&(this.paddleX=e-this.paddleWidth/2,this.clampPaddle())},this.touchMoveHandler=t=>{t.preventDefault();const s=this.canvas.getBoundingClientRect(),i=t.touches[0].clientX-s.left;i>0&&i<this.canvasWidth&&(this.paddleX=i-this.paddleWidth/2,this.clampPaddle())},document.addEventListener("keydown",this.keyDownHandler),document.addEventListener("keyup",this.keyUpHandler),this.canvas.addEventListener("mousemove",this.mouseMoveHandler),this.canvas.addEventListener("touchmove",this.touchMoveHandler,{passive:!1})}clampPaddle(){this.paddleX<0&&(this.paddleX=0),this.paddleX+this.paddleWidth>this.canvasWidth&&(this.paddleX=this.canvasWidth-this.paddleWidth)}update(){if(this.isPaused){this.draw();return}if(this.leftPressed&&(this.paddleX-=this.paddleSpeed),this.rightPressed&&(this.paddleX+=this.paddleSpeed),this.clampPaddle(),this.ballX+=this.ballDX,this.ballY+=this.ballDY,(this.ballX+this.ballRadius>this.canvasWidth||this.ballX-this.ballRadius<0)&&(this.ballDX=-this.ballDX),this.ballY-this.ballRadius<0&&(this.ballDY=-this.ballDY),this.ballY+this.ballRadius>this.canvasHeight-this.paddleHeight-5&&this.ballY+this.ballRadius<this.canvasHeight&&this.ballX>this.paddleX&&this.ballX<this.paddleX+this.paddleWidth){const s=((this.ballX-this.paddleX)/this.paddleWidth-.5)*(Math.PI/3),e=Math.sqrt(this.ballDX*this.ballDX+this.ballDY*this.ballDY);this.ballDX=Math.sin(s)*e,this.ballDY=-Math.abs(Math.cos(s)*e)}if(this.ballY+this.ballRadius>this.canvasHeight){if(this.lives--,this.updateDisplay(),this.lives<=0){this.gameOver();return}this.resetBall()}this.checkBrickCollision(),this.allBricksCleared()&&this.nextLevel(),this.draw()}checkBrickCollision(){for(let t=0;t<this.brickColumnCount;t++)for(let s=0;s<this.brickRowCount;s++){const e=this.bricks[t][s];if(e.status===1){const i=t*(this.brickWidth+this.brickPadding)+this.brickOffsetLeft,n=s*(this.brickHeight+this.brickPadding)+this.brickOffsetTop;e.x=i,e.y=n,this.ballX>i&&this.ballX<i+this.brickWidth&&this.ballY>n&&this.ballY<n+this.brickHeight&&(this.ballDY=-this.ballDY,e.status=0,this.score+=10*this.level,this.updateDisplay())}}}allBricksCleared(){for(let t=0;t<this.brickColumnCount;t++)for(let s=0;s<this.brickRowCount;s++)if(this.bricks[t][s].status===1)return!1;return!0}nextLevel(){this.level++,this.initBricks(),this.resetBall(),this.updateDisplay(),this.isPaused=!0,setTimeout(()=>{this.isPaused=!1},1e3)}updateDisplay(){const t=document.getElementById("breakout-score"),s=document.getElementById("breakout-lives"),e=document.getElementById("breakout-level"),i=document.getElementById("breakout-high");t&&(t.textContent=this.score),s&&(s.textContent=this.lives),e&&(e.textContent=this.level),this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("breakoutHighScore",this.highScore.toString()),i&&(i.textContent=this.highScore))}draw(){const t=this.ctx;t.fillStyle="#0a0a0f",t.fillRect(0,0,this.canvasWidth,this.canvasHeight);for(let s=0;s<this.brickColumnCount;s++)for(let e=0;e<this.brickRowCount;e++)if(this.bricks[s][e].status===1){const i=s*(this.brickWidth+this.brickPadding)+this.brickOffsetLeft,n=e*(this.brickHeight+this.brickPadding)+this.brickOffsetTop,a=35+e*5,l=55-e*5;t.fillStyle=`hsl(${a}, 80%, ${l}%)`,t.shadowColor=`hsl(${a}, 80%, ${l}%)`,t.shadowBlur=5,this.roundRect(i,n,this.brickWidth,this.brickHeight,3)}if(t.shadowBlur=0,t.fillStyle="#ffc233",t.shadowColor="#ffc233",t.shadowBlur=8,this.roundRect(this.paddleX,this.canvasHeight-this.paddleHeight-5,this.paddleWidth,this.paddleHeight,4),t.shadowBlur=0,t.fillStyle="#fff",t.shadowColor="#ffc233",t.shadowBlur=10,t.beginPath(),t.arc(this.ballX,this.ballY,this.ballRadius,0,Math.PI*2),t.fill(),t.shadowBlur=0,this.isPaused){t.fillStyle="rgba(5, 5, 10, 0.7)",t.fillRect(0,0,this.canvasWidth,this.canvasHeight),t.fillStyle="#ffc233",t.font='bold 24px "IBM Plex Mono"',t.textAlign="center",t.fillText("PAUSED",this.canvasWidth/2,this.canvasHeight/2),t.font='14px "IBM Plex Mono"',t.fillStyle="#9ca3af";const s=this.isMobile?"Tap pause to resume":"Press SPACE to resume";t.fillText(s,this.canvasWidth/2,this.canvasHeight/2+30)}}roundRect(t,s,e,i,n){this.ctx.beginPath(),this.ctx.moveTo(t+n,s),this.ctx.lineTo(t+e-n,s),this.ctx.quadraticCurveTo(t+e,s,t+e,s+n),this.ctx.lineTo(t+e,s+i-n),this.ctx.quadraticCurveTo(t+e,s+i,t+e-n,s+i),this.ctx.lineTo(t+n,s+i),this.ctx.quadraticCurveTo(t,s+i,t,s+i-n),this.ctx.lineTo(t,s+n),this.ctx.quadraticCurveTo(t,s,t+n,s),this.ctx.closePath(),this.ctx.fill()}gameOver(){this.stop(),this.ctx.fillStyle="rgba(248, 113, 113, 0.3)",this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight),setTimeout(()=>{this.ctx.fillStyle="rgba(5, 5, 10, 0.85)",this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.ctx.textAlign="center",this.ctx.fillStyle="#f87171",this.ctx.font='bold 24px "IBM Plex Mono"',this.ctx.fillText("GAME OVER",this.canvasWidth/2,this.canvasHeight/2-30),this.ctx.fillStyle="#ffc233",this.ctx.font='18px "IBM Plex Mono"',this.ctx.fillText(`Score: ${this.score}`,this.canvasWidth/2,this.canvasHeight/2+5),this.ctx.font='14px "IBM Plex Mono"',this.ctx.fillStyle="#9ca3af",this.ctx.fillText(`Level: ${this.level}`,this.canvasWidth/2,this.canvasHeight/2+30),this.score>=this.highScore&&this.score>0&&(this.ctx.fillStyle="#34d399",this.ctx.font='12px "IBM Plex Mono"',this.ctx.fillText("NEW HIGH SCORE!",this.canvasWidth/2,this.canvasHeight/2+55))},200),this.terminal.print(`
<span class="output-error">Game Over!</span> Score: <span class="output-accent">${this.score}</span> | Level: <span class="output-accent">${this.level}</span>`,"response"),this.score>=this.highScore&&this.score>0&&this.terminal.print('<span class="output-success">New High Score!</span>',"response"),this.terminal.print(`<span class="output-muted">Type "breakout" to play again</span>
`,"response")}stop(){this.isRunning=!1,this.gameLoop&&(clearInterval(this.gameLoop),this.gameLoop=null),document.removeEventListener("keydown",this.keyDownHandler),document.removeEventListener("keyup",this.keyUpHandler),this.canvas&&(this.canvas.removeEventListener("mousemove",this.mouseMoveHandler),this.canvas.removeEventListener("touchmove",this.touchMoveHandler)),setTimeout(()=>{const t=document.getElementById("terminal-input");t&&t.focus()},100)}}class c{constructor(t){this.terminal=t,this.canvas=null,this.ctx=null,this.container=null,this.canvasWidth=360,this.canvasHeight=240,this.reelWidth=100,this.reelHeight=165,this.reelGap=15,this.reelStartX=15,this.reelStartY=50,this.symbolHeight=60,this.symbols=[{char:"7",color:"#ef4444",weight:5,payout:100},{char:"$",color:"#22c55e",weight:10,payout:50},{char:"*",color:"#ffc233",weight:15,payout:25},{char:"#",color:"#3b82f6",weight:20,payout:15},{char:"@",color:"#a855f7",weight:25,payout:10},{char:"&",color:"#06b6d4",weight:25,payout:5}],this.balance=parseInt(localStorage.getItem("slotsBalance")||"100"),this.totalWinnings=parseInt(localStorage.getItem("slotsTotalWinnings")||"0"),this.betAmount=10,this.reels=[0,0,0],this.targetReels=[0,0,0],this.spinning=!1,this.spinSpeed=[0,0,0],this.reelOffsets=[0,0,0],this.isRunning=!1,this.animationFrame=null,this.lastWin=0,this.jackpotAnimation=null,this.jackpotFrame=0,this.winHighlight=null,this.winHighlightDuration=60,this.showPaytable=!1,this.particles=[],this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0}start(){if(this.isMobile){const t=document.getElementById("terminal-input");t&&t.blur()}this.createGameArea(),this.bindControls(),this.isRunning=!0,this.draw()}createGameArea(){this.container=document.createElement("div"),this.container.className="game-container",this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.className="slots-canvas";const t=document.createElement("div");t.className="game-info",t.id="slots-info",t.innerHTML=`
      Balance: <span id="slots-balance">${this.balance}</span> |
      Bet: <span id="slots-bet">${this.betAmount}</span> |
      Won: <span id="slots-total">${this.totalWinnings}</span>
    `,this.canvas.onclick=s=>{const e=this.canvas.getBoundingClientRect(),i=s.clientX-e.left,n=s.clientY-e.top,a=this.canvasWidth-35,l=28,r=12;Math.abs(i-a)<r+5&&Math.abs(n-l)<r+5?this.togglePaytable():this.showPaytable&&(this.showPaytable=!1,this.draw())},this.container.appendChild(this.canvas),this.container.appendChild(t),this.createControls(),this.terminal.outputEl.appendChild(this.container),this.ctx=this.canvas.getContext("2d"),this.container.scrollIntoView({behavior:"smooth",block:"center"})}createControls(){const t=document.createElement("div");t.className="slots-controls";const s=document.createElement("button");s.className="slots-btn",s.innerHTML="BET -",s.setAttribute("aria-label","Decrease bet"),s.onclick=()=>this.changeBet(-5);const e=document.createElement("button");e.className="slots-btn slots-btn-spin",this.spinBtn=e,e.innerHTML="SPIN",e.setAttribute("aria-label","Spin"),e.onclick=()=>this.spin();const i=document.createElement("button");i.className="slots-btn",i.innerHTML="BET +",i.setAttribute("aria-label","Increase bet"),i.onclick=()=>this.changeBet(5),t.appendChild(s),t.appendChild(e),t.appendChild(i),this.container.appendChild(t),this.injectStyles()}injectStyles(){if(document.getElementById("slots-styles"))return;const t=document.createElement("style");t.id="slots-styles",t.textContent=`
      .slots-controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 10px;
      }

      .slots-btn {
        height: 45px;
        padding: 0 20px;
        font-size: 14px;
        font-weight: bold;
        background: rgba(212, 160, 23, 0.2);
        border: 2px solid var(--amber-dim);
        border-radius: 8px;
        color: var(--amber);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        font-family: 'IBM Plex Mono', monospace;
        transition: background 0.15s;
      }

      .slots-btn:hover {
        background: rgba(212, 160, 23, 0.35);
      }

      .slots-btn-spin {
        padding: 0 35px;
        background: rgba(212, 160, 23, 0.3);
        font-size: 16px;
      }

      .slots-btn:active {
        background: rgba(212, 160, 23, 0.5);
      }

      .slots-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
    `,document.head.appendChild(t)}bindControls(){this.keyHandler=t=>{this.isRunning&&t.key==="Escape"&&(this.stop(),this.terminal.print(`
<span class="output-muted">Thanks for playing! Type "slots" to play again.</span>
`,"response"))},document.addEventListener("keydown",this.keyHandler)}changeBet(t){const s=this.betAmount+t;s>=5&&s<=Math.min(100,this.balance)&&(this.betAmount=s,this.updateDisplay(),this.draw())}togglePaytable(){this.showPaytable=!this.showPaytable,this.draw()}spin(){if(this.spinning||this.balance<this.betAmount){this.balance<this.betAmount&&this.terminal.print('<span class="output-error">Not enough balance! Reset with "slots reset"</span>',"response");return}this.spinBtn.disabled=!0,this.spinBtn.innerHTML="...",this.balance-=this.betAmount,this.lastWin=0,this.updateDisplay(),this.targetReels=this.reels.map(()=>this.getRandomSymbol()),this.spinning=!0,this.spinSpeed=[20,20,20],this.reelOffsets=[0,0,0],[1e3,1500,2e3].forEach((s,e)=>{setTimeout(()=>{this.stopReel(e)},s)}),this.animate()}getRandomSymbol(){const t=this.symbols.reduce((e,i)=>e+i.weight,0);let s=Math.random()*t;for(let e=0;e<this.symbols.length;e++)if(s-=this.symbols[e].weight,s<=0)return e;return this.symbols.length-1}stopReel(t){this.spinSpeed[t]=0,this.reels[t]=this.targetReels[t],this.reelOffsets[t]=0,this.spinSpeed.every(s=>s===0)&&(this.spinning=!1,this.spinBtn.disabled=!1,this.spinBtn.innerHTML="SPIN",this.checkWin())}animate(){if(this.isRunning){for(let t=0;t<3;t++)this.spinSpeed[t]>0&&(this.reelOffsets[t]+=this.spinSpeed[t],this.reelOffsets[t]>=this.symbolHeight&&(this.reelOffsets[t]=0,this.reels[t]=(this.reels[t]+1)%this.symbols.length));this.jackpotAnimation&&(this.jackpotFrame++,this.jackpotFrame>120&&(this.jackpotAnimation=null,this.jackpotFrame=0)),this.draw(),(this.spinning||this.jackpotAnimation)&&(this.animationFrame=requestAnimationFrame(()=>this.animate()))}}checkWin(){const[t,s,e]=this.reels;let i=0,n=!1,a=[],l=null;if(t===s&&s===e)i=this.symbols[t].payout*this.betAmount,a=[0,1,2],l=this.symbols[t].color,this.symbols[t].char==="7"&&(n=!0,i*=2);else if(t===s||s===e){const r=t===s?t:s;i=Math.floor(this.symbols[r].payout*this.betAmount*.2),a=t===s?[0,1]:[1,2],l=this.symbols[r].color}i>0?(this.balance+=i,this.totalWinnings+=i,this.lastWin=i,localStorage.setItem("slotsBalance",this.balance.toString()),localStorage.setItem("slotsTotalWinnings",this.totalWinnings.toString()),this.updateDisplay(),this.winHighlight={reels:a,frame:0,color:l,isJackpot:n},this.animateWinHighlight(),n||(a.length===2?this.spawnParticles(6,l,60):t<=2?this.spawnParticles(14,l,100):this.spawnParticles(10,l,80)),n?this.terminal.print(`
<span class="output-success">*** JACKPOT! ***</span> You won <span class="output-accent">${i}</span>!`,"response"):t===s&&s===e&&this.terminal.print(`<span class="output-success">Three of a kind!</span> Won <span class="output-accent">${i}</span>`,"response")):localStorage.setItem("slotsBalance",this.balance.toString()),this.draw()}startJackpotAnimation(){this.jackpotAnimation=!0,this.jackpotFrame=0,this.animate()}animateWinHighlight(){if(!this.winHighlight||!this.isRunning)return;this.winHighlight.frame++,this.draw();const t=this.winHighlight.isJackpot?90:this.winHighlightDuration;this.winHighlight.frame<t?requestAnimationFrame(()=>this.animateWinHighlight()):(this.winHighlight.isJackpot&&this.startJackpotAnimation(),this.winHighlight=null,this.draw())}spawnParticles(t,s,e){const i=this.reelStartX+(3*this.reelWidth+2*this.reelGap)/2,n=this.reelStartY+this.reelHeight/2;for(let a=0;a<t;a++){const l=a/t*Math.PI*2+Math.random()*.5,r=2+Math.random()*3;this.particles.push({x:i,y:n,vx:Math.cos(l)*r,vy:Math.sin(l)*r-1,color:s,size:4+Math.random()*4,life:e,maxLife:e})}this.animateParticles()}animateParticles(){this.particles.length===0||!this.isRunning||(this.particles=this.particles.filter(t=>(t.x+=t.vx,t.y+=t.vy,t.vy+=.1,t.life--,t.life>0)),this.draw(),this.particles.length>0&&requestAnimationFrame(()=>this.animateParticles()))}drawParticles(){const t=this.ctx;this.particles.forEach(s=>{const e=s.life/s.maxLife;t.globalAlpha=e,t.fillStyle=s.color,t.beginPath(),t.arc(s.x,s.y,s.size*e,0,Math.PI*2),t.fill()}),t.globalAlpha=1}updateDisplay(){const t=document.getElementById("slots-balance"),s=document.getElementById("slots-bet"),e=document.getElementById("slots-total");t&&(t.textContent=this.balance),s&&(s.textContent=this.betAmount),e&&(e.textContent=this.totalWinnings)}draw(){const t=this.ctx;t.fillStyle="#0a0a0f",t.fillRect(0,0,this.canvasWidth,this.canvasHeight),t.fillStyle="#ffc233",t.font='bold 18px "IBM Plex Mono"',t.textAlign="center",t.fillText("LUCKY TERMINAL",this.canvasWidth/2,35);const s=this.canvasWidth-35,e=28;t.beginPath(),t.arc(s,e,12,0,Math.PI*2),t.fillStyle=this.showPaytable?"#ffc233":"#d4a017",t.fill(),t.strokeStyle="#b8860b",t.lineWidth=2,t.stroke(),t.fillStyle="#0a0a0f",t.font='bold 14px "IBM Plex Mono"',t.textAlign="center",t.textBaseline="middle",t.fillText("$",s,e),t.textBaseline="alphabetic";for(let n=0;n<3;n++)this.drawReel(n);t.strokeStyle="rgba(255, 194, 51, 0.5)",t.lineWidth=2,t.setLineDash([5,5]);const i=this.reelStartY+this.reelHeight/2-12;t.beginPath(),t.moveTo(this.reelStartX,i),t.lineTo(this.reelStartX+3*this.reelWidth+2*this.reelGap,i),t.stroke(),t.setLineDash([]),this.particles.length>0&&this.drawParticles(),this.lastWin>0&&!this.spinning&&(t.fillStyle="#22c55e",t.font='bold 14px "IBM Plex Mono"',t.fillText(`WIN: ${this.lastWin}`,this.canvasWidth/2,this.canvasHeight-8)),this.jackpotAnimation&&this.drawJackpotAnimation(),this.showPaytable&&this.drawPaytable()}drawPaytable(){const t=this.ctx;t.fillStyle="rgba(0, 0, 0, 0.9)",t.fillRect(15,40,this.canvasWidth-30,this.canvasHeight-55),t.strokeStyle="#ffc233",t.lineWidth=2,t.strokeRect(15,40,this.canvasWidth-30,this.canvasHeight-55),t.fillStyle="#ffc233",t.font='bold 14px "IBM Plex Mono"',t.textAlign="center",t.fillText("PAYTABLE",this.canvasWidth/2,58);const s=82,e=24;this.symbols.forEach((a,l)=>{const r=s+l*e;t.fillStyle=a.color,t.font='bold 18px "IBM Plex Mono"',t.textAlign="center",t.fillText(a.char,50,r),t.fillStyle="#e5e5e5",t.font='13px "IBM Plex Mono"',t.textAlign="left",t.fillText(`3x = ${a.payout}x`,85,r),t.fillStyle="#9ca3af",t.fillText(`2x = ${Math.floor(a.payout*.2)}x`,200,r)});const i=s+this.symbols.length*e+4;t.strokeStyle="#ffc233",t.lineWidth=1,t.beginPath(),t.moveTo(30,i),t.lineTo(this.canvasWidth-30,i),t.stroke();const n=i+20;t.fillStyle="#ef4444",t.font='bold 18px "IBM Plex Mono"',t.textAlign="center",t.fillText("7 7 7",50,n),t.fillStyle="#ffc233",t.font='bold 13px "IBM Plex Mono"',t.textAlign="left",t.fillText("JACKPOT! (2x bonus)",85,n),t.fillStyle="#6b7280",t.font='10px "IBM Plex Mono"',t.textAlign="center",t.fillText("tap to close",this.canvasWidth/2,this.canvasHeight-22)}drawReel(t){const s=this.ctx,e=this.reelStartX+t*(this.reelWidth+this.reelGap),i=this.reelStartY;s.fillStyle="#1a1a2e",s.fillRect(e,i,this.reelWidth,this.reelHeight),s.strokeStyle="#d4a017",s.lineWidth=2,s.strokeRect(e,i,this.reelWidth,this.reelHeight),s.save(),s.beginPath(),s.rect(e,i,this.reelWidth,this.reelHeight),s.clip();const n=this.reels[t],a=this.reelOffsets[t];for(let l=-1;l<=2;l++){const r=(n+l+this.symbols.length)%this.symbols.length,h=this.symbols[r],p=i+this.reelHeight/2-15+l*this.symbolHeight-a;if(l===0&&!this.spinning)if(this.winHighlight&&this.winHighlight.reels.includes(t)){const u=this.winHighlight.isJackpot?.25:.35,d=Math.sin(this.winHighlight.frame*u)*.5+.5,m=this.winHighlight.isJackpot?25:20;s.shadowColor=this.winHighlight.color,s.shadowBlur=m*d+5}else s.shadowColor=h.color,s.shadowBlur=10;s.fillStyle=h.color,s.font='bold 48px "IBM Plex Mono"',s.textAlign="center",s.fillText(h.char,e+this.reelWidth/2,p+15),s.shadowBlur=0}s.restore()}drawJackpotAnimation(){const t=this.ctx,s=Math.sin(this.jackpotFrame*.3)*.3+.3;t.fillStyle=`rgba(255, 215, 0, ${s})`,t.fillRect(0,0,this.canvasWidth,this.canvasHeight);const e=this.jackpotFrame*5%360;t.fillStyle=`hsl(${e}, 100%, 50%)`,t.strokeStyle="#000",t.lineWidth=3,t.font='bold 36px "IBM Plex Mono"',t.textAlign="center";const i=Math.sin(this.jackpotFrame*.2)*10;t.strokeText("JACKPOT!",this.canvasWidth/2,this.canvasHeight/2+i),t.fillText("JACKPOT!",this.canvasWidth/2,this.canvasHeight/2+i);for(let n=0;n<8;n++){const a=n/8*Math.PI*2+this.jackpotFrame*.05,l=80+Math.sin(this.jackpotFrame*.1+n)*20,r=this.canvasWidth/2+Math.cos(a)*l,h=this.canvasHeight/2+Math.sin(a)*l;t.fillStyle=`hsl(${(e+n*45)%360}, 100%, 50%)`,t.beginPath(),t.arc(r,h,8,0,Math.PI*2),t.fill()}}stop(){this.isRunning=!1,this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null),document.removeEventListener("keydown",this.keyHandler),setTimeout(()=>{const t=document.getElementById("terminal-input");t&&t.focus()},100)}static resetBalance(){localStorage.setItem("slotsBalance","100"),localStorage.setItem("slotsTotalWinnings","0")}}function x(o){o.register("sudo",(t,s)=>{const e=["Permission denied. This incident will be reported to Santa.","Nice try, but you're not root here. I'm root. This is my house.","sudo: user 'guest' is not in the sudoers file.","<span class='output-error'>Access Denied.</span> Did you try saying 'please'?","sudo make me a sandwich? <span class='output-muted'>...okay.</span>","With great power comes great responsibility. You're not ready.","<span class='output-error'>Error:</span> Nice try, hackerman.","I'm sorry Dave, I'm afraid I can't do that."],i=e[Math.floor(Math.random()*e.length)];s.print(i,"response")},{description:"Try to gain root access",aliases:[]}),o.register("hack",(t,s)=>{s.print('<span class="output-success">Initiating hack sequence...</span>',"response"),s.print(`<span class="output-muted">Press ESC or wait to exit</span>
`,"response"),new b().start(15e3)},{description:"Enter the Matrix",aliases:["matrix"]}),o.register("snake",(t,s)=>{s.print(`
<span class="output-accent">SNAKE</span>`,"response"),s.print('<span class="output-muted">Use arrow keys or WASD to move</span>',"response"),s.print(`<span class="output-muted">Press ESC to quit</span>
`,"response"),new y(s).start()},{description:"Play Snake",aliases:[]}),o.register("breakout",(t,s)=>{s.print(`
<span class="output-accent">BREAKOUT</span>`,"response"),s.print('<span class="output-muted">Use arrow keys, A/D, or mouse to move paddle</span>',"response"),s.print(`<span class="output-muted">Press SPACE to pause, ESC to quit</span>
`,"response"),new v(s).start()},{description:"Play Breakout",aliases:[]}),o.register("slots",(t,s)=>{if(t[0]==="reset"){c.resetBalance(),s.print('<span class="output-success">Balance reset to 100!</span>',"response");return}s.print(`
<span class="output-accent">LUCKY TERMINAL SLOTS</span>`,"response"),s.print('<span class="output-muted">Use buttons to play | ESC to quit</span>',"response"),s.print(`<span class="output-muted">Type "slots reset" to reset balance</span>
`,"response"),new c(s).start()},{description:"Play Slots",aliases:["slot"]}),o.register("coffee",(t,s)=>{s.print(`
<span class="ascii-art">
        ( (
         ) )
      .─────.
      |     |]
      \`─────'
       \`───'
</span>
<span class="output-muted">Here's your mass-produced caffeinated joy! Take a sip and return to normal functionality.</span>
`,"response")},{description:"Get coffee",hidden:!0}),o.register("cowsay",(t,s)=>{const e=t.join(" ")||"Moo!",i=e.length+2,n=" "+"_".repeat(i),a=" "+"-".repeat(i);s.print(`
<span class="ascii-art">${n}
< ${e} >
${a}
        \\   ^__^
         \\  (oo)\\_______
            (__)\\       )\\/\\
                ||----w |
                ||     ||</span>
`,"response")},{description:"Cow says what?",hidden:!0}),o.register("fortune",(t,s)=>{const e=["There are only two hard things in Computer Science: cache invalidation and naming things. - Phil Karlton","Any fool can write code that a computer can understand. Good programmers write code that humans can understand. - Martin Fowler","First, solve the problem. Then, write the code. - John Johnson","Code is like humor. When you have to explain it, it's bad. - Cory House","Fix the cause, not the symptom. - Steve Maguire","Simplicity is the soul of efficiency. - Austin Freeman","Before software can be reusable it first has to be usable. - Ralph Johnson","Make it work, make it right, make it fast. - Kent Beck","The best error message is the one that never shows up. - Thomas Fuchs","It's not a bug – it's an undocumented feature.","In order to understand recursion, one must first understand recursion.","There's no place like 127.0.0.1","A SQL query walks into a bar, walks up to two tables and asks 'Can I join you?'","Why do programmers prefer dark mode? Because light attracts bugs.","// Magic. Do not touch."],i=e[Math.floor(Math.random()*e.length)];s.print(`
<span class="output-accent">"${i}"</span>
`,"response")},{description:"Get a fortune",hidden:!0}),o.register("rm",(t,s)=>{const e=t.join(" ");e.includes("-rf")&&e.includes("/")?(s.print('<span class="output-error">Deleting system files...</span>',"response"),["Removing /usr/bin...","Removing /etc/passwd...","Removing /home/*...","Removing existential dread... wait, that one stays.","",'<span class="output-success">Just kidding!</span> This is a website, not your actual system.',`<span class="output-muted">But maybe don't run that command on real machines?</span>`].forEach((n,a)=>{setTimeout(()=>{s.print(n,"response")},a*400)})):s.print("rm: missing operand","response")},{description:"Remove files",hidden:!0}),o.register("exit",(t,s)=>{const e=["Nice try! But there's no escape from this terminal.","You can check out any time you like, but you can never leave...","Exit? In this economy?","<span class='output-error'>Error:</span> Cannot exit. You're stuck with me forever.","Have you tried turning it off and on again?","*pretends not to hear you*"],i=e[Math.floor(Math.random()*e.length)];s.print(i,"response")},{description:"Try to exit",hidden:!0})}function k(o){o.register("date",(t,s)=>{const e=new Date;s.print(e.toString(),"response")},{description:"Show current date",hidden:!0}),o.register("pwd",(t,s)=>{s.print("/home/guest/tomstoneberg.com","response")},{description:"Print working directory",hidden:!0}),o.register("cat",(t,s)=>{t[0]===".secrets"?s.print(`
<span class="output-accent">SECRETS FILE</span>
<span class="output-muted">─────────────────────────────────</span>

  ▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒
  ░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌
  ▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀
  ▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░
  █▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄
  ▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓▒░▌█▄▀▓

<span class="output-muted">─────────────────────────────────</span>
<span class="output-muted">Now you know too much...</span>
`,"response"):t[0]==="README.md"?s.print(`
<span class="output-accent"># Welcome to my Terminal</span>

Thanks for visiting! This is my personal website,
built as an interactive terminal experience.

<span class="output-cyan">## Quick Start</span>

- Type <span class="output-cyan">help</span> to see available commands
- Type <span class="output-cyan">about</span> to learn about me
- Type <span class="output-cyan">contact</span> to get in touch

<span class="output-cyan">## Easter Eggs</span>

There are hidden commands scattered throughout.
Try typing random things and see what happens!

<span class="output-muted">Made with vanilla HTML/CSS/JS</span>
`,"response"):s.print(`cat: ${t[0]||""}: No such file or directory`,"response")},{description:"Read files",hidden:!0}),o.register("echo",(t,s)=>{s.print(t.join(" ")||"","response")},{description:"Echo text",hidden:!0}),o.register("ping",(t,s)=>{const e=t[0]||"localhost";s.print(`PING ${e}: 64 bytes, time=<1ms`,"response"),s.print('<span class="output-success">Host is alive!</span>',"response")},{description:"Ping host",hidden:!0}),o.register("neofetch",(t,s)=>{s.print(`
<span class="ascii-art">        _____</span>        <span class="output-cyan">guest</span>@<span class="output-accent">tomstoneberg.com</span>
<span class="ascii-art">       /     \\</span>       <span class="output-muted">─────────────────────</span>
<span class="ascii-art">      | () () |</span>      <span class="output-cyan">OS:</span> WebOS 1.0
<span class="ascii-art">       \\  ^  /</span>       <span class="output-cyan">Host:</span> Your Browser
<span class="ascii-art">        |||||</span>        <span class="output-cyan">Kernel:</span> JavaScript
<span class="ascii-art">        |||||</span>        <span class="output-cyan">Shell:</span> tom-terminal 1.0
                      <span class="output-cyan">Terminal:</span> Phosphor CRT
                      <span class="output-cyan">CPU:</span> Your Device
                      <span class="output-cyan">Memory:</span> Enough
`,"response")},{description:"System info",hidden:!0}),o.register("history",(t,s)=>{const e=s.history.getAll();if(e.length===0){s.print("No commands in history yet.","response");return}e.forEach((i,n)=>{s.print(`  ${(n+1).toString().padStart(3)}  ${i}`,"response")})},{description:"Show command history",hidden:!0}),o.register("theme",(t,s)=>{s.print('<span class="output-muted">Available themes: phosphor (current)</span>',"response"),s.print('<span class="output-muted">More themes coming soon...</span>',"response")},{description:"Change theme",hidden:!0}),o.register("uptime",(t,s)=>{const e=window.terminalStartTime||Date.now(),i=Math.floor((Date.now()-e)/1e3),n=Math.floor(i/60),a=i%60;s.print(`Terminal has been running for ${n}m ${a}s`,"response")},{description:"Show uptime",hidden:!0}),o.register("whoami",(t,s)=>{s.print("guest","response"),s.print(`<span class="output-muted">You're a visitor exploring this terminal. Welcome!</span>`,"response")},{description:"Who are you?",hidden:!0})}function S(o){o.register("dn",(t,s)=>{window.open("https://dn-clicker2.vercel.app","_blank")},{description:"",hidden:!0}),o.register("chumley",(t,s)=>{window.open("https://op.gg/lol/summoners/na/chumley420-NA1","_blank")},{description:"",hidden:!0}),o.register("empatheticrock",(t,s)=>{window.open("https://op.gg/lol/summoners/na/EmpatheticRock-NA1","_blank")},{description:"",hidden:!0}),o.register("masedawg",(t,s)=>{window.open("https://op.gg/lol/summoners/na/masedawg69-NA1","_blank")},{description:"",hidden:!0})}class w{constructor(){this.commands=new Map,this.aliases=new Map,this.registerAll()}register(t,s,e={}){this.commands.set(t,{handler:s,description:e.description||"",hidden:e.hidden||!1,aliases:e.aliases||[]}),e.aliases&&e.aliases.forEach(i=>{this.aliases.set(i,t)})}execute(t,s,e){const i=this.aliases.get(t)||t,n=this.commands.get(i);if(!n){e.printError(`Command not found: ${t}`),e.print('Type <span class="output-cyan">help</span> for available commands.',"response");return}n.handler(s,e)}getVisibleCommands(){return[...this.commands.entries()].filter(([t,s])=>!s.hidden).map(([t,s])=>({name:t,description:s.description,aliases:s.aliases}))}registerAll(){g(this),x(this),k(this),S(this)}}class E{constructor(){this.bodyEl=document.getElementById("terminal-body"),this.outputEl=document.getElementById("output"),this.inputEl=document.getElementById("terminal-input"),this.mirrorEl=document.getElementById("input-mirror"),this.cursorEl=document.querySelector(".cursor"),this.history=new f,this.commands=new w,window.terminalStartTime=Date.now(),this.init()}init(){this.bindEvents(),this.focusInput(),this.bootSequence()}bindEvents(){this.inputEl.addEventListener("keydown",t=>this.handleKeyDown(t)),this.inputEl.addEventListener("input",()=>this.updateCursor()),document.addEventListener("click",t=>{t.target.tagName==="A"||t.target.closest(".game-container")||this.focusInput()}),this.inputEl.addEventListener("focus",()=>this.updateCursor()),this.inputEl.addEventListener("blur",()=>this.updateCursor())}handleKeyDown(t){switch(t.key){case"Enter":t.preventDefault(),this.executeCommand();break;case"ArrowUp":t.preventDefault(),this.inputEl.value=this.history.navigateUp(this.inputEl.value),this.updateCursor(),this.inputEl.setSelectionRange(this.inputEl.value.length,this.inputEl.value.length);break;case"ArrowDown":t.preventDefault(),this.inputEl.value=this.history.navigateDown(),this.updateCursor(),this.inputEl.setSelectionRange(this.inputEl.value.length,this.inputEl.value.length);break;case"Tab":t.preventDefault(),this.handleTabComplete();break;case"l":t.ctrlKey&&(t.preventDefault(),this.clear());break;case"c":t.ctrlKey&&(t.preventDefault(),this.inputEl.value="",this.print("^C","response"),this.updateCursor());break}}handleTabComplete(){const t=this.inputEl.value.toLowerCase().trim();if(!t)return;const s=[];this.commands.commands.forEach((i,n)=>{s.push(n),i.aliases.forEach(a=>s.push(a))});const e=s.filter(i=>i.startsWith(t));e.length===1?(this.inputEl.value=e[0]+" ",this.updateCursor()):e.length>1&&this.print(`
<span class="output-muted">${e.join("  ")}</span>`,"response")}executeCommand(){const t=this.inputEl.value.trim();if(this.inputEl.value="",this.updateCursor(),!t){this.print("","command");return}this.history.add(t),this.print(t,"command");const s=t.match(/(?:[^\s"]+|"[^"]*")+/g)||[],[e,...i]=s.map(n=>n.replace(/^"|"$/g,""));e&&this.commands.execute(e.toLowerCase(),i,this),this.scrollToBottom()}print(t,s="response"){const e=document.createElement("div");e.className=`output-line output-${s}`,e.innerHTML=t,this.outputEl.appendChild(e),this.scrollToBottom()}printError(t){this.print(`<span class="output-error">Error:</span> ${t}`,"response")}clear(){this.outputEl.innerHTML=""}scrollToBottom(){requestAnimationFrame(()=>{this.bodyEl.scrollTop=this.bodyEl.scrollHeight})}focusInput(){this.inputEl.focus()}updateCursor(){this.mirrorEl&&(this.mirrorEl.textContent=this.inputEl.value),this.cursorEl&&(this.cursorEl.style.display=document.activeElement===this.inputEl?"inline-block":"none")}bootSequence(){[{text:'<span class="output-muted">Initializing terminal...</span>',delay:0},{text:'<span class="output-muted">Loading modules...</span>',delay:50},{text:'<span class="output-success">System ready.</span>',delay:100},{text:"",delay:150},{text:this.getWelcomeBanner(),delay:200},{text:"",delay:250},{text:'<span class="output-muted">Type</span> <span class="output-cyan">help</span> <span class="output-muted">to see available commands.</span>',delay:300},{text:"",delay:350}].forEach(({text:s,delay:e})=>{setTimeout(()=>{const i=document.createElement("div");i.className="output-line boot-line",i.innerHTML=s,this.outputEl.appendChild(i),this.scrollToBottom()},e)})}getWelcomeBanner(){return`<pre class="ascii-art">
 _____ ___  __  __   ____ _____ ___  _   _ _____ ____  _____ ____   ____
|_   _/ _ \\|  \\/  | / ___|_   _/ _ \\| \\ | | ____| __ )| ____|  _ \\ / ___|
  | || | | | |\\/| | \\___ \\ | || | | |  \\| |  _| |  _ \\|  _| | |_) | |  _
  | || |_| | |  | |  ___) || || |_| | |\\  | |___| |_) | |___|  _ <| |_| |
  |_| \\___/|_|  |_| |____/ |_| \\___/|_| \\_|_____|____/|_____|_| \\_\\\\____|
</pre>
<span class="output-accent">Welcome to my terminal.</span> <span class="output-muted">Explore, discover, and have fun!</span>`}}document.addEventListener("DOMContentLoaded",()=>{window.terminal=new E});
